(this["webpackJsonpsd-01-week16-react-redux-starwars-datatable-filters"]=this["webpackJsonpsd-01-week16-react-redux-starwars-datatable-filters"]||[]).push([[0],{21:function(e,t,n){e.exports=n(35)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(8),l=n.n(u),c=n(3),s=(n(31),n(32),n(15)),i=n(16),o=n(19),m=n(17),f=n(20),d=n(6),v=(n(33),function(e){var t=e.selects,n=e.i,r=e.setSelectedValues,u=e.filters,l=[];if(u.length>1){var c=Object(d.a)(u).slice(1);l=c.length?c.map((function(e){return e.numeric_values.column})):c}return a.a.createElement("div",{className:"select-container"},a.a.createElement("div",{className:"select"},a.a.createElement("select",{id:"values",className:"custom-select",onChange:function(e){return r(e,n)}},0===n?a.a.createElement("option",{className:"select-column",value:""},"Todos"):a.a.createElement("option",{className:"select-comparison",value:""},"Escolha um comparador"),t.map((function(e){return l.includes(e)?null:a.a.createElement("option",{value:e,key:e},e)})))),a.a.createElement("div",{className:"filter-number-content"},1===n?a.a.createElement("input",{className:"input-filter-number",type:"number",placeholder:"Digite um valor numerico",onChange:function(e){return r(e,2)}}):""))}),E=Object(c.b)((function(e){var t=e.selectors.selectedValues;return{filters:e.table.filters,selectedValues:t}}),(function(e){return{setSelectedValues:function(t,n){return e(function(e,t){var n=e.target.value;return 0===t?function(e){return e({type:"COLUMN_VALUES",selectedValues:{column:n}})}:1===t?function(e){return e({type:"COMPARISON_VALUES",selectedValues:{comparison:n}})}:2===t?function(e){return e(function(e){return{type:"VALUES",selectedValues:{value:e}}}(n))}:null}(t,n))}}}))(v);v.defaultProps={};var p=Object(c.b)((function(e){var t=e.selectors.selectedValues,n=e.data.results,r=e.table;return{selectedValues:t,results:n,resultsByName:r.resultsByName,filters:r.filters}}),(function(e){return{setNewFilter:function(t,n,r,a){return e(function(e,t,n,r){return r.target.parentNode.parentNode.parentNode.firstChild.firstChild.firstChild.selectedIndex=0,r.target.parentNode.parentNode.parentNode.childNodes[1].firstChild.lastChild.selectedIndex=0,r.target.parentNode.parentNode.parentNode.childNodes[1].lastChild.firstChild.value=null,function(r){r(function(e,t,n){return{type:"ADD_FILTERS",resultsByName:n,results:t,filters:[{numeric_values:{column:e.column,comparison:e.comparison,value:e.value}}]}}(e,t,n)),r({type:"RESET_STATE_SELECTORS",selectedValues:{column:"",comparison:"",value:0}})}}(t,n,r,a))},removeFilter:function(t,n){return e(function(e,t){var n=e.target.id;return function(e){return e(function(e,t){return{type:"REMOVE_FILTER",results:t,index:e}}(n,t))}}(t,n))}}}))((function(e){var t=e.setNewFilter,n=e.selectedValues,r=e.results,u=e.resultsByName,l=e.filters,c=e.removeFilter,s=n.column,i=n.comparison,o=n.value,m=Object(d.a)(l).slice(1);return a.a.createElement("div",null,s&&i&&o?a.a.createElement("button",{className:"filter-button",type:"button",onClick:function(e){return t(n,r,u,e)}},"Clique para filtrar"):a.a.createElement("div",null),m.length?m.map((function(e,t){var n=e.numeric_values;return a.a.createElement("div",{className:"clear-filter-container",key:n.column},a.a.createElement("button",{key:n.column,id:t,type:"button",onClick:function(e){return c(e,r)}},"X"),"".concat(n.column," | ").concat(n.comparison," | ").concat(n.value))})):m)})),h=(n(34),function(){return fetch("".concat("https://swapi.co/api","/planets")).then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))});var b=function(e,t){return t.filter((function(t){return t.name.toLowerCase().match(e)}))},N=function(e,t,n,r){switch(t){case"maior que":return e.filter((function(e){return e[n]>parseInt(r,10)}));case"menor que":return e.filter((function(e){return e[n]<parseInt(r,10)}));case"igual a":return e.filter((function(e){return e[n]===r}));default:return e}},S=function(e,t,n,r,a){var u=b(a[0].name,e)||e;return a.forEach((function(e){e.numeric_values&&(u=N(u,e.numeric_values.comparison,e.numeric_values.column,e.numeric_values.value))})),u},y=function(e,t,n){var r=t[t.length-1].numeric_values||{column:"",comparison:"",value:0},a=r.column,u=r.comparison,l=r.value;return a&&u&&l?function(e,t,n,r,a,u){var l=n;return u[0].name&&(l=S(e,0,0,0,u)),N(l,t,r,a)}(e,u,n,a,l,t):b(t[0].name,e)};var O=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getCurrentSwPlanets,n=e.setResultsByName;t().then((function(e){var t=e.results;return n(t)}))}},{key:"tableHead",value:function(e){var t=this.props,n=t.setAscendingColumn,r=t.filterOrder.order;return a.a.createElement("thead",null,a.a.createElement("tr",null,Object.keys(e[0]||[]).map((function(e){return"residents"!==e&&"films"!==e&&"url"!==e?a.a.createElement("th",{className:"table-index-content",key:e},a.a.createElement("button",{className:"title-button",type:"button",value:e,onClick:function(e){return n(e,r)}},e.toUpperCase())):null}))))}},{key:"tableBody",value:function(e){var t=this;return this.residentsIndex=Object.keys(e[0]||[]).findIndex((function(e){return"residents"===e})),this.filmsIndex=Object.keys(e[0]||[]).findIndex((function(e){return"films"===e})),this.urlIndex=Object.keys(e[0]||[]).findIndex((function(e){return"url"===e})),e.map((function(e){return a.a.createElement("tbody",{key:e.name},a.a.createElement("tr",null,Object.values(e).map((function(e,n){return n!==t.residentsIndex&&n!==t.filmsIndex&&n!==t.urlIndex?a.a.createElement("td",{className:"table-values-content",key:e},e):null}))))}))}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.results,r=e.getFilterByName,u=e.resultsByName,l=e.filterOrder;if(t)return a.a.createElement("div",{className:"loading-page"},"LOADING...");var c=function(e,t,n){var r=e.slice();return"ASC"===n?r.sort((function(e,n){return e[t]>n[t]?1:-1})):r.sort((function(e,n){return e[t]<n[t]?1:-1}))}(u,l.column,l.order);return a.a.createElement("div",null,a.a.createElement("div",{className:"filters-container"},a.a.createElement("div",null,a.a.createElement("input",{className:"input-name",type:"text",placeholder:"Digite um nome",onChange:function(e){return r(e,n)}})),a.a.createElement("div",{className:"filters-selectors-container"},a.a.createElement("label",{htmlFor:"values",className:"filter-label"},"Choose a filter:"),a.a.createElement("div",{className:"selectors-container"},a.a.createElement(E,{selects:["population","orbital_period","diameter","rotation_period","surface_water"],i:0}),a.a.createElement(E,{selects:["maior que","menor que","igual a"],i:1}),a.a.createElement("div",{className:"filter-button-container"},a.a.createElement(p,null))))),a.a.createElement("table",{className:"table-content"},a.a.createElement("caption",null,"STAR WARS PLANETS"),this.tableHead(c),this.tableBody(c)))}}]),t}(r.Component);O.defaultProps={results:[]};var _=Object(c.b)((function(e){var t=e.data,n=t.isFetching,r=t.results,a=e.table;return{resultsByName:a.resultsByName,filterOrder:a.filterOrder,isFetching:n,results:r}}),(function(e){return{setAscendingColumn:function(t,n){return e(function(e,t){var n=e.target.value,r="ASC"===t?"DESC":"ASC";return function(e){return e(function(e,t){return{type:"ASC_DESC_ORDER",filter:{column:e,order:t}}}(n,r))}}(t,n))},setResultsByName:function(t){return e(function(e){return function(t){return t(function(e){return{type:"CREATE_RESULTS",results:e}}(e))}}(t))},getCurrentSwPlanets:function(){return e((function(e){return e({type:"REQUEST_SW_PLANETS"}),h().then((function(t){return e({type:"REQUEST_SW_PLANETS_SUCCESS",results:t.results})}),(function(t){return e(function(e){return{type:"REQUEST_SW_PLANETS_FAILURE",error:e}}(t.message))}))}))},getFilterByName:function(t,n){return e(function(e,t){var n=e.target.value;return function(e){return e(function(e,t){return{type:"FILTER_BY_NAME",results:t,filters:[{name:e}]}}(n.toLowerCase(),t))}}(t,n))}}}))(O);var g=function(){return a.a.createElement("div",null,a.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=n(4),j=n(18),A=n(1),R={isFetching:!0,results:[],error:"",filters:[{name:""}]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SW_PLANETS":return Object(A.a)({},e,{isFetching:!0});case"REQUEST_SW_PLANETS_SUCCESS":return Object(A.a)({},e,{results:t.results,isFetching:!1});case"REQUEST_SW_PLANETS_FAILURE":return Object(A.a)({},e,{error:t.error,isFetching:!1});default:return e}},L={selectedValues:{column:"",comparison:"",value:0}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COLUMN_VALUES":case"COMPARISON_VALUES":case"VALUES":return Object(A.a)({},e,{selectedValues:Object(A.a)({},e.selectedValues,{},t.selectedValues)});case"RESET_STATE_SELECTORS":return Object(A.a)({},e,{selectedValues:t.selectedValues});default:return e}},V=n(7);function k(e){var t=e[e.length-1].numeric_values?e[e.length-1].numeric_values:{comparison:"",column:"",value:0};return[t.comparison,t.column,t.value]}function w(e,t){var n=Object(d.a)(e.filters).slice(1),r=[].concat(Object(V.a)(t.filters),Object(V.a)(n)),a=k(r);return Object(A.a)({},e,{resultsByName:S(t.results,a[0],a[1],a[2],r),filters:r})}function B(e,t){var n=function(e,t){var n=parseInt(e,10)+1;return t.filter((function(e,t){return t!==n}))}(t.index,e.filters),r=k(n),a=S(t.results,r[0],r[1],r[2],n);return Object(A.a)({},e,{resultsByName:a,filters:n})}var F={resultsByName:[],filterOrder:{column:"name",order:"ASC"},filters:[{name:""}]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_RESULTS":return Object(A.a)({},e,{resultsByName:t.results});case"FILTER_BY_NAME":return w(e,t);case"ADD_FILTERS":var n=[].concat(Object(V.a)(e.filters),Object(V.a)(t.filters));return Object(A.a)({},e,{resultsByName:y(t.results,n,t.resultsByName),filters:n});case"REMOVE_FILTER":return B(e,t);case"ASC_DESC_ORDER":return Object(A.a)({},e,{filterOrder:t.filter});default:return e}},x=Object(C.c)({data:T,selectors:I,table:U}),P=Object(C.d)(x,Object(C.a)(j.a));l.a.render(a.a.createElement(c.a,{store:P},a.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.44ee3bd0.chunk.js.map